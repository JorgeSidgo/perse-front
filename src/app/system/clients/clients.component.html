<app-clients-modal-add [modalIsVisible]="addModalIsVisible" (modalState)="closeModal()" (parentReload)="loadData()">
</app-clients-modal-add>

<app-clients-modal-delete [modalIsVisible]="deleteModalIsVisible" [userId]="userId" (modalState)="closeModalDelete()"
  (parentReload)="loadData()">
</app-clients-modal-delete>

<app-clients-modal-edit [modalIsVisible]="editModalVisible" [dataList]="dataListEdit" [id]="userId"
  (modalState)="closeModalEdit()" (parentReload)="loadData()" #edit>
</app-clients-modal-edit>

<app-clients-modal-points [modalIsVisible]="pointsModalIsVisible" [contentLoading]="pointsModalcontentLoading"
  [clientPoints]="userPoints" [clientName]="userName" [clientId]="userId" (modalState)="closePointsModal()"
  (parentReload)="loadData()">
</app-clients-modal-points>

<app-clients-modal-spam [modalIsVisible]="spamModalIsVisible" [contentLoading]="spamModalContentLoading"
  (modalState)="closeSpamModal()" (parentReload)="loadData()">
</app-clients-modal-spam>

<div class="view-title">
  <h5 nz-title>Gestión de Clientes</h5>

  <div class="button-bar">
    <button style="margin-right: 1em;" (click)="showSpamModal()" nz-button nzType="primary">
      <i nz-icon nzType="message" nzTheme="outline"></i>
      Spam
    </button>
    <button nz-button class="ant-btn-success" (click)="showModal()">
      <i nz-icon nzType="plus" nzTheme="outline"></i>
      Agregar
    </button>
  </div>
</div>

<div class="grid-container">

  <div nz-row [nzGutter]="16" style="margin: 0;">


    <div nz-col nzOffset="18" nzSpan="6" style="margin-bottom: 1em; padding-right: 0;">
      <nz-input-group [nzSuffix]="suffixTemplate" [nzPrefix]="prefixTemplate">
        <input type="text" nz-input placeholder="Buscar" [(ngModel)]="search_data" (change)="searchClients()" />
      </nz-input-group>
      <ng-template #prefixTemplate>
        <i nz-icon nzType="search"></i>
      </ng-template>
      <ng-template #suffixTemplate>
        <i nz-icon nz-tooltip class="ant-input-clear-icon" nzTheme="fill" nzType="close-circle" *ngIf="search_data"
          (click)="index()"></i>
      </ng-template>
    </div>


  </div>

  <div nz-row [nzGutter]="16" style="margin:0;">
    <div *ngIf="gridIsLoading" class="univ-loading-container">
      <nz-spin nzSimple></nz-spin>
    </div>
    <table class="ui very compact celled table">

      <thead class="super-compact">
        <tr>
          <th>Nº</th>
          <th>Nombre</th>
          <th>Apellido</th>
          <th>E-mail</th>
          <th>Teléfono</th>
          <th>Puntos</th>
          <th>Cumpleaños</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of dataList">
          <td>{{data.id}}</td>
          <td>{{data.first_name}}</td>
          <td>{{data.last_name}}</td>
          <td>{{data.email}}</td>
          <td>{{data.phone}}</td>
          <td>{{data.points}}</td>
          <td>{{data.birthday | date:'dd/MM/yyyy'}}</td>
          <td class="action-shelf">
            <button class="ant-btn-blue" nz-button nzType="primary" nzSize="small" nzShape="circle"
              (click)="edit.loadDataEdit(data.id)"><i nz-icon nzType="edit"></i></button>
            <button class="ant-btn-red" nz-button nzType="primary" nzSize="small" nzShape="circle"
              (click)="showModalDelete(data.id)"><i nz-icon nzType="delete"></i></button>
            <!-- <button class="ant-btn-black" nz-button nzType="primary" nzSize="small" nzShape="circle"><i nz-icon
                nzType="ellipsis"></i></button> -->
            <button class="ant-btn-yellow" (click)="showPointsModal(data.id)" nz-button nzType="primary" nzSize="small"
              nzShape="circle"><i nz-icon nzType="dollar-circle" nzTheme="fill"></i></button>
          </td>
        </tr>
      </tbody>
    </table>
    <!-- <nz-table [nzLoading]="gridIsLoading" #borderedTable nzBordered nzSize="small" [nzData]="dataList">
      <thead>
        <tr>
          <th>Nº</th>
          <th>Nombre</th>
          <th>Apellido</th>
          <th>E-mail</th>
          <th>Teléfono</th>
          <th>Puntos</th>
          <th>Cumpleaños</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of dataList">
          <td>{{data.id}}</td>
          <td>{{data.first_name}}</td>
          <td>{{data.last_name}}</td>
          <td>{{data.email}}</td>
          <td>{{data.phone}}</td>
          <td>{{data.points}}</td>
          <td>{{data.birthday | date:'dd/MM/yyyy'}}</td>
          <td class="action-shelf">
            <button class="ant-btn-blue" nz-button nzType="primary" nzSize="small" nzShape="circle"><i nz-icon
                nzType="edit"></i></button>
            <button class="ant-btn-red" nz-button nzType="primary" nzSize="small" nzShape="circle"><i nz-icon
                nzType="delete"></i></button>
            <button class="ant-btn-black" nz-button nzType="primary" nzSize="small" nzShape="circle"><i nz-icon
                nzType="ellipsis"></i></button>
            <button class="ant-btn-yellow" (click)="showPointsModal(data.id)" nz-button nzType="primary" nzSize="small"
              nzShape="circle"><i nz-icon nzType="dollar-circle" nzTheme="fill"></i></button>
          </td>
        </tr>
      </tbody>
    </nz-table> -->

  </div>
</div>
